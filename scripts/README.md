# ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ Ñ…Ð¾Ð´Ð¾Ð² Ð´Ð»Ñ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸

Ð­Ñ‚Ð¾Ñ‚ Ð½Ð°Ð±Ð¾Ñ€ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð² Ð¿Ñ€ÐµÐ´Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½ Ð´Ð»Ñ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð° `turns_hierarchical.jsonl` Ð² Ð¾Ð¿Ñ‚Ð¸Ð¼Ð°Ð»ÑŒÐ½ÑƒÑŽ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð´Ð»Ñ ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾Ð³Ð¾ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚ÑŒÑŽ.

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ñ„Ð°Ð¹Ð»Ð¾Ð²

```
scripts/
â”œâ”€â”€ optimize-turns-structure.cjs      # Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹
â”œâ”€â”€ create-turn-connections.cjs       # Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ²ÑÐ·ÐµÐ¹ Ð¼ÐµÐ¶Ð´Ñƒ Ñ…Ð¾Ð´Ð°Ð¼Ð¸
â”œâ”€â”€ process-turns-pipeline.cjs        # ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¿Ð°Ð¹Ð¿Ð»Ð°Ð¹Ð½ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
â”œâ”€â”€ test-single-turn.cjs              # Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¼ Ñ…Ð¾Ð´Ðµ
â””â”€â”€ README.md                         # Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð»
```

## ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### 1. Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¼ Ñ…Ð¾Ð´Ðµ

```bash
node test-single-turn.cjs d:/Downloads/turns_hierarchical.jsonl 0
```

Ð­Ñ‚Ð¾ ÑÐ¾Ð·Ð´Ð°ÑÑ‚ Ñ„Ð°Ð¹Ð» `test_turn_0_optimized.json` Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¾Ð¹ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ…Ð¾Ð´Ð°.

### 2. ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ„Ð°Ð¹Ð»Ð°

```bash
node process-turns-pipeline.cjs d:/Downloads/turns_hierarchical.jsonl ./processed
```

Ð­Ñ‚Ð¾ ÑÐ¾Ð·Ð´Ð°ÑÑ‚ Ð¿Ð¾Ð»Ð½ÑƒÑŽ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½ÑƒÑŽ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ ÑÐ¾ Ð²ÑÐµÐ¼Ð¸ ÑÐ²ÑÐ·ÑÐ¼Ð¸ Ð¸ Ð¸Ð½Ð´ÐµÐºÑÐ°Ð¼Ð¸.

## ðŸ“‹ ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð²

### `optimize-turns-structure.cjs`

**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ñ…Ð¾Ð´Ð¾Ð²

**Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸**:
- Ð˜Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÐµÐ¹ (Ð»ÑŽÐ´Ð¸, Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸, Ð»Ð¾ÐºÐ°Ñ†Ð¸Ð¸)
- ÐÐ½Ð°Ð»Ð¸Ð· Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ
- Ð Ð°Ð·Ð±Ð¸ÐµÐ½Ð¸Ðµ Ð½Ð° Ñ‡Ð°Ð½ÐºÐ¸
- Ð˜Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐ¼
- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð²

**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ**:
```bash
node optimize-turns-structure.cjs input.jsonl output.jsonl
```

### `create-turn-connections.cjs`

**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ²ÑÐ·ÐµÐ¹ Ð¼ÐµÐ¶Ð´Ñƒ Ñ…Ð¾Ð´Ð°Ð¼Ð¸ Ð¸ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ

**Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸**:
- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ²ÑÐ·ÐµÐ¹ Ð¼ÐµÐ¶Ð´Ñƒ Ñ…Ð¾Ð´Ð°Ð¼Ð¸
- ÐÐ½Ð°Ð»Ð¸Ð· Ð½ÐµÐ¿Ñ€ÐµÑ€Ñ‹Ð²Ð½Ð¾ÑÑ‚Ð¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹
- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð»Ð¸Ð½Ð¸Ð¹
- ÐŸÐ¾ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð¸ÑÐºÐ¾Ð²Ð¾Ð³Ð¾ Ð¸Ð½Ð´ÐµÐºÑÐ°

**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ**:
```bash
node create-turn-connections.cjs input.jsonl output.json
```

### `process-turns-pipeline.cjs`

**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¿Ð°Ð¹Ð¿Ð»Ð°Ð¹Ð½ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸

**Ð­Ñ‚Ð°Ð¿Ñ‹**:
1. Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹
2. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ²ÑÐ·ÐµÐ¹ Ð¼ÐµÐ¶Ð´Ñƒ Ñ…Ð¾Ð´Ð°Ð¼Ð¸
3. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð° Ð¾ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ
4. Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸

**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ**:
```bash
node process-turns-pipeline.cjs input.jsonl output_directory
```

### `test-single-turn.cjs`

**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¼ Ñ…Ð¾Ð´Ðµ

**Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸**:
- ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ñ…Ð¾Ð´Ð°
- Ð’Ñ‹Ð²Ð¾Ð´ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸
- Ð¡Ñ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€
- Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÐµÐ¹

**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ**:
```bash
node test-single-turn.cjs input.jsonl turn_index
```

## ðŸ“Š ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°

### ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ

1. **Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ**
   ```json
   {
     "metadata": {
       "title": "Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº",
       "date": "2000-11-01",
       "word_count": 15000,
       "complexity_score": 0.8,
       "sentiment_overall": "neutral"
     }
   }
   ```

2. **Ð Ð°Ð·Ð±Ð¸ÐµÐ½Ð¸Ðµ Ð½Ð° Ñ‡Ð°Ð½ÐºÐ¸**
   ```json
   {
     "content": {
       "chunks": [
         {
           "chunk_id": "turn_14_intro_1",
           "content": "Ð¢ÐµÐºÑÑ‚ Ñ‡Ð°Ð½ÐºÐ°",
           "tokens_estimate": 500,
           "sentiment": "neutral"
         }
       ]
     }
   }
   ```

3. **Ð˜Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð½Ñ‹Ðµ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚Ð¸**
   ```json
   {
     "indexes": {
       "entities": {
         "people": ["ÐŸÑƒÑ‚Ð¸Ð½", "Ð”Ð¾Ð»Ð³Ð¾Ð²"],
         "organizations": ["ÐšÑ€ÐµÐ¼Ð»ÑŒ", "Ð¤Ð¡Ð‘"],
         "locations": ["ÐœÐ¾ÑÐºÐ²Ð°", "ÐŸÐµÑ‚ÐµÑ€Ð±ÑƒÑ€Ð³"]
       }
     }
   }
   ```

4. **Ð¢ÐµÐ¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð·**
   ```json
   {
     "indexes": {
       "themes": [
         {"theme": "politics", "relevance": 0.9},
         {"theme": "economy", "relevance": 0.7}
       ]
     }
   }
   ```

5. **Ð¡Ð²ÑÐ·Ð¸ Ð¼ÐµÐ¶Ð´Ñƒ Ñ…Ð¾Ð´Ð°Ð¼Ð¸**
   ```json
   {
     "connections": {
       "previous_turn": "turn_13",
       "next_turn": "turn_15",
       "related_turns": ["turn_12", "turn_16"]
     }
   }
   ```

## ðŸŽ¯ ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð° Ð´Ð»Ñ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸

### 1. Ð­Ñ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð½Ð¾Ð³Ð¾ Ð¾ÐºÐ½Ð°
- Ð§Ð°Ð½ÐºÐ¸ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð¾Ð¼ 1000-2000 Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð²
- ÐŸÐµÑ€ÐµÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Ñ‡Ð°Ð½ÐºÐ°Ð¼Ð¸
- ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ð¾ Ð²Ð°Ð¶Ð½Ð¾ÑÑ‚Ð¸

### 2. Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð¿Ð¾Ð¸ÑÐº Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸
- Ð˜Ð½Ð´ÐµÐºÑÑ‹ Ð¿Ð¾ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÑÐ¼
- Ð˜Ð½Ð´ÐµÐºÑÑ‹ Ð¿Ð¾ Ñ‚ÐµÐ¼Ð°Ð¼
- Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð»Ð¸Ð½Ð¸Ð¸
- ÐŸÐ¾Ð¸ÑÐºÐ¾Ð²Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ

### 3. Ð¡ÐµÐ¼Ð°Ð½Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ²ÑÐ·Ð¸
- ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð½Ð¾-ÑÐ»ÐµÐ´ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ ÑÐ²ÑÐ·Ð¸
- Ð¢ÐµÐ¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ¸
- ÐÐµÐ¿Ñ€ÐµÑ€Ñ‹Ð²Ð½Ð¾ÑÑ‚ÑŒ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹

### 4. ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸
- ÐÐ½Ð°Ð»Ð¸Ð· Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ
- ÐžÑ†ÐµÐ½ÐºÐ° ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸
- ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ñ‹
- Ð¤Ð°ÐºÑ‚Ð¾Ñ€Ñ‹ Ñ€Ð¸ÑÐºÐ° Ð¸ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

## ðŸ“ˆ ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ

### ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ñƒ
```javascript
const putinTurns = searchIndex.by_entity['ÐŸÑƒÑ‚Ð¸Ð½'];
console.log(`ÐŸÑƒÑ‚Ð¸Ð½ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ð² ${putinTurns.length} Ñ…Ð¾Ð´Ð°Ñ…`);
```

### ÐÐ½Ð°Ð»Ð¸Ð· Ñ‚ÐµÐ¼Ñ‹
```javascript
const politicsTurns = searchIndex.by_theme['politics'];
console.log(`ÐŸÐ¾Ð»Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ñ‚ÐµÐ¼Ñ‹ Ð² ${politicsTurns.length} Ñ…Ð¾Ð´Ð°Ñ…`);
```

### Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð»Ð¸Ð½Ð¸Ñ
```javascript
const putinTimeline = timeline.characters['ÐŸÑƒÑ‚Ð¸Ð½'];
putinTimeline.forEach(event => {
  console.log(`${event.date}: ${event.context[0]}`);
});
```

### Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ñ‡Ð°Ð½ÐºÐ°Ð¼Ð¸
```javascript
turn.content.chunks.forEach(chunk => {
  if (chunk.tokens_estimate <= 1000) {
    // ÐŸÐ¾Ð´Ñ…Ð¾Ð´Ð¸Ñ‚ Ð´Ð»Ñ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð½Ð¾Ð³Ð¾ Ð¾ÐºÐ½Ð°
    processChunk(chunk);
  }
});
```

## ðŸ”§ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°

### ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ñ‡Ð°Ð½ÐºÐ¸Ð½Ð³Ð°
Ð’ `optimize-turns-structure.cjs`:
```javascript
function splitIntoChunks(text, maxTokens = 1000) {
  // Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ maxTokens Ð´Ð»Ñ Ð´Ñ€ÑƒÐ³Ð¾Ð³Ð¾ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð° Ñ‡Ð°Ð½ÐºÐ¾Ð²
}
```

### Ð¡Ð»Ð¾Ð²Ð°Ñ€Ð¸ Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°
Ð’ `optimize-turns-structure.cjs`:
```javascript
const positiveWords = ['Ñ€Ð¾ÑÑ‚', 'ÑƒÑÐ¿ÐµÑ…', 'Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ðµ'];
const negativeWords = ['ÐºÑ€Ð¸Ð·Ð¸Ñ', 'Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°', 'ÐºÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚'];
// Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑÐ²Ð¾Ð¸ ÑÐ»Ð¾Ð²Ð°
```

### Ð¢ÐµÐ¼Ñ‹ Ð´Ð»Ñ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ñ
Ð’ `optimize-turns-structure.cjs`:
```javascript
const themes = {
  politics: ['Ð²Ð»Ð°ÑÑ‚ÑŒ', 'ÐºÑ€ÐµÐ¼Ð»ÑŒ', 'Ð¿Ñ€ÐµÐ·Ð¸Ð´ÐµÐ½Ñ‚'],
  economy: ['ÑÐºÐ¾Ð½Ð¾Ð¼Ð¸ÐºÐ°', 'Ð±Ð¸Ð·Ð½ÐµÑ', 'Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸Ð¸'],
  // Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑÐ²Ð¾Ð¸ Ñ‚ÐµÐ¼Ñ‹
};
```

## ðŸ“ Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹

ÐŸÐ¾ÑÐ»Ðµ Ð¿Ð¾Ð»Ð½Ð¾Ð¹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ ÑÐ¾Ð·Ð´Ð°ÑŽÑ‚ÑÑ:

1. **`turns_processed_*_final.json`** - ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°
2. **`turns_processed_*_optimized.jsonl`** - Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ñ…Ð¾Ð´Ñ‹
3. **`turns_processed_*_timeline.json`** - Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð»Ð¸Ð½Ð¸Ð¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹
4. **`turns_processed_*_search_index.json`** - ÐŸÐ¾Ð¸ÑÐºÐ¾Ð²Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ
5. **`turns_processed_*_quality_report.json`** - ÐžÑ‚Ñ‡ÐµÑ‚ Ð¾ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ
6. **`turns_processed_*_example.json`** - ÐŸÑ€Ð¸Ð¼ÐµÑ€ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹
7. **`turns_processed_*_README.md`** - Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ

## ðŸ› Ð£ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½ÐµÐ¿Ð¾Ð»Ð°Ð´Ð¾Ðº

### ÐžÑˆÐ¸Ð±ÐºÐ° "Ð¤Ð°Ð¹Ð» Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½"
```bash
# Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð¿ÑƒÑ‚ÑŒ Ðº Ñ„Ð°Ð¹Ð»Ñƒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹
ls d:/Downloads/turns_hierarchical.jsonl
```

### ÐžÑˆÐ¸Ð±ÐºÐ° "ÐœÐ¾Ð´ÑƒÐ»ÑŒ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½"
```bash
# Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ñ‹ Ð² Ð¾Ð´Ð½Ð¾Ð¹ Ð¿Ð°Ð¿ÐºÐµ
ls scripts/*.cjs
```

### ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° JSON
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ñ„Ð°Ð¹Ð»Ð°
head -1 d:/Downloads/turns_hierarchical.jsonl | jq .
```

## ðŸ“ž ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

ÐŸÑ€Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ½Ð¾Ð²ÐµÐ½Ð¸Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼:

1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð²Ñ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ñ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ñ„Ð°Ð¹Ð»Ð°Ð¼
4. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ñ‚ÐµÑÑ‚ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¼ Ñ…Ð¾Ð´Ðµ Ð´Ð»Ñ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¸

## ðŸ”„ Ð’ÐµÑ€ÑÐ¸Ð¸

- **v1.0**: Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸ÐµÐ¼ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÐµÐ¹
- **v2.0**: Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹ ÑÐ²ÑÐ·Ð¸ Ð¼ÐµÐ¶Ð´Ñƒ Ñ…Ð¾Ð´Ð°Ð¼Ð¸ Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð»Ð¸Ð½Ð¸Ð¸
- **v2.1**: Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð½Ñ‹Ð¹ Ð¿Ð¾Ð¸ÑÐºÐ¾Ð²Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð· ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° 