const admin = require('firebase-admin');
const fs = require('fs');
const path = require('path');

// –ü—É—Ç—å –∫ —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∫–ª—é—á—É (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
const serviceAccount = require('../serviceAccountKey.json');

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount)
});

const db = admin.firestore();

async function createSecondTermFocuses() {
  try {
    console.log('–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ–∫—É—Å–æ–≤ –≤—Ç–æ—Ä–æ–≥–æ —Å—Ä–æ–∫–∞...');
    
    // –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–æ–∫—É—Å "–í—Ç–æ—Ä–æ–π —Å—Ä–æ–∫"
    const parentFocus = {
      id: "second_term",
      name: "–í—Ç–æ—Ä–æ–π —Å—Ä–æ–∫",
      description: "–ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç—Å–∫–æ–≥–æ —Å—Ä–æ–∫–∞ —Ç—Ä–µ–±—É–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞, –æ—Ç—Ä–∞–∂–∞—é—â–µ–≥–æ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ –±–∞–ª–∞–Ω—Å —Å–∏–ª –≤ —ç–ª–∏—Ç–∞—Ö.",
      icon_path: "history/focus_tree_icons/political_power.png",
      x: 8.5,
      y: 0,
      prerequisites: [],
      mutually_exclusive: [],
      completion_reward: "",
      ai_will_do: {
        factor: 1
      }
    };

    // –î–æ—á–µ—Ä–Ω–∏–µ —Ñ–æ–∫—É—Å—ã
    const childFocuses = [
      {
        id: "new_cabinet_new_tasks",
        name: "‚öúÔ∏è –ù–æ–≤—ã–π –ö–∞–±–∏–Ω–µ—Ç ‚Äì –ù–æ–≤—ã–µ –ó–∞–¥–∞—á–∏",
        description: "–ù–æ–≤—ã–π –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç—Å–∫–∏–π —Å—Ä–æ–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–µ—Ä–µ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –≤–ª–∞—Å—Ç–∏. –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ –ø–æ–ª—É—á–∞–µ—Ç –∂—ë—Å—Ç–∫–∏–π –º–∞–Ω–¥–∞—Ç –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ ‚Äî –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ –Ω–∞—É–∫–∏. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–º—ã—Å–ª–æ–º –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—É—Ä—Å–∞. –≠—Ç–æ –∫–∞–±–∏–Ω–µ—Ç –º–æ–±–∏–ª–∏–∑–∞—Ü–∏–∏, –∞ –Ω–µ –±–∞–ª–∞–Ω—Å–∞.",
        icon_path: "history/focus_tree_icons/political_power.png",
        x: 6.5,
        y: 1,
        prerequisites: ["second_term"],
        mutually_exclusive: ["pragmatic_center", "consensus_loyal", "business_signals", "dialogue_window"],
        completion_reward: "add_political_power = 3",
        ai_will_do: {
          factor: 1
        }
      },
      {
        id: "pragmatic_center",
        name: "‚òÄÔ∏è –ü—Ä–∞–≥–º–∞—Ç–∏—á–Ω—ã–π –¶–µ–Ω—Ç—Ä",
        description: "–ö—É—Ä—Å –Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫—É—é —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—é –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏—è –Ω–∞ —Ä—ã–Ω–æ–∫. –ù–æ–≤—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å–æ—á–µ—Ç–∞–µ—Ç –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫—É—é –ª–æ—è–ª—å–Ω–æ—Å—Ç—å —Å —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–º –ø—Ä–∞–≥–º–∞—Ç–∏–∑–º–æ–º. –£–¥–µ—Ä–∂–∞–Ω–∏–µ –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –∂—ë—Å—Ç–∫–æ–π —á–∏—Å—Ç–∫–∏. –≠—Ç–æ –≤—ã–±–æ—Ä –≤ –ø–æ–ª—å–∑—É –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Ç–æ—á–µ—á–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è.",
        icon_path: "history/focus_tree_icons/political_power.png",
        x: 7.5,
        y: 1,
        prerequisites: ["second_term"],
        mutually_exclusive: ["new_cabinet_new_tasks", "consensus_loyal", "business_signals", "dialogue_window"],
        completion_reward: "add_political_power = 1",
        ai_will_do: {
          factor: 1
        }
      },
      {
        id: "consensus_loyal",
        name: "‚öñÔ∏è –ö–æ–Ω—Å–µ–Ω—Å—É—Å –õ–æ—è–ª—å–Ω—ã—Ö",
        description: "–ü–æ—Å–ª–µ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–±–µ–¥—ã —É–º–µ—Å—Ç–Ω–æ –Ω–µ —Å–ø–µ—à–∏—Ç—å —Å –¥–µ–º–æ–Ω—Ç–∞–∂–æ–º —Å–ª–æ–∂–∏–≤—à–∏—Ö—Å—è –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤. –í–º–µ—Å—Ç–æ —Ä–µ–∑–∫–∏—Ö —à–∞–≥–æ–≤ ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞. –ö–ª—é—á–µ–≤—ã–µ –º–∏–Ω–∏—Å—Ç—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ —Å–≤–æ–∏—Ö –ø–æ—Å—Ç–∞—Ö: –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –¥–æ–∫–∞–∑–∞–ª –ª–æ—è–ª—å–Ω–æ—Å—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å. –ö–∞–±–∏–Ω–µ—Ç –Ω–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç –∏–¥–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –≤–µ–∫—Ç–æ—Ä, –æ–Ω ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç–ª–∏—Ç–Ω–æ–≥–æ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–∞, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.",
        icon_path: "history/focus_tree_icons/political_power.png",
        x: 8.5,
        y: 1,
        prerequisites: ["second_term"],
        mutually_exclusive: ["new_cabinet_new_tasks", "pragmatic_center", "business_signals", "dialogue_window"],
        completion_reward: "",
        ai_will_do: {
          factor: 1
        }
      },
      {
        id: "business_signals",
        name: "üåó –°–∏–≥–Ω–∞–ª—ã –ë–∏–∑–Ω–µ—Å—É",
        description: "–ü–æ—Å–ª–µ ¬´–¥–µ–ª–∞ –Æ–ö–û–°–∞¬ª —ç–∫–æ–Ω–æ–º–∏–∫–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª—å, –Ω–æ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –±—É–¥—É—â–µ–º. –ù–æ–≤—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–∞—ë—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–π, –Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π —Å–∏–≥–Ω–∞–ª –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—è–º: —á–∞—Å—Ç–Ω–∞—è –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ –Ω–µ –ø–æ–¥ –∑–∞–ø—Ä–µ—Ç–æ–º. –í–ª–∞—Å—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–∏–∞–ª–æ–≥–∞ ‚Äî –Ω–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞, –Ω–æ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏.",
        icon_path: "history/focus_tree_icons/political_power.png",
        x: 9.5,
        y: 1,
        prerequisites: ["second_term"],
        mutually_exclusive: ["new_cabinet_new_tasks", "pragmatic_center", "consensus_loyal", "dialogue_window"],
        completion_reward: "add_lunar_influence = -1",
        ai_will_do: {
          factor: 1
        }
      },
      {
        id: "dialogue_window",
        name: "üåë –û–∫–Ω–æ –¥–ª—è –î–∏–∞–ª–æ–≥–∞",
        description: "–î–ª—è –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–∏ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å. –ù–æ–≤–æ–µ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ –≤–∫–ª—é—á–∞–µ—Ç —Ñ–∏–≥—É—Ä—ã —Å —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π —Ä—ã–Ω–æ—á–Ω—ã—Ö —Ä–µ—Ñ–æ—Ä–º–∞—Ç–æ—Ä–æ–≤. –≠—Ç–æ –Ω–µ –ø–æ–≤–æ—Ä–æ—Ç –∫—É—Ä—Å–∞, –Ω–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –ª–∏–±–µ—Ä–∞–ª–∏–∑–∞—Ü–∏–µ–π. –û–Ω –º–æ–∂–µ—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è –∫–∞–∫ —É—Å–ø–µ—Ö–æ–º, —Ç–∞–∫ –∏ —Ä–µ—Ü–∏–¥–∏–≤–æ–º —Ç—É—Ä–±—É–ª–µ–Ω—Ç–Ω–æ—Å—Ç–∏.",
        icon_path: "history/focus_tree_icons/political_power.png",
        x: 10.5,
        y: 1,
        prerequisites: ["second_term"],
        mutually_exclusive: ["new_cabinet_new_tasks", "pragmatic_center", "consensus_loyal", "business_signals"],
        completion_reward: "add_lunar_influence = -2",
        ai_will_do: {
          factor: 1
        }
      }
    ];

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–æ–∫—É—Å
    await db.collection('focus_tree_nodes').doc(parentFocus.id).set(parentFocus);
    console.log(`‚úì –°–æ–∑–¥–∞–Ω —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–æ–∫—É—Å: ${parentFocus.name} (${parentFocus.id})`);

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ—á–µ—Ä–Ω–∏–µ —Ñ–æ–∫—É—Å—ã
    for (const focus of childFocuses) {
      await db.collection('focus_tree_nodes').doc(focus.id).set(focus);
      console.log(`‚úì –°–æ–∑–¥–∞–Ω —Ñ–æ–∫—É—Å: ${focus.name} (${focus.id})`);
    }

    console.log('\n‚úÖ –í—Å–µ —Ñ–æ–∫—É—Å—ã –≤—Ç–æ—Ä–æ–≥–æ —Å—Ä–æ–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã –≤ Firestore!');
    console.log(`üìä –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–æ–∫—É—Å–æ–≤: ${childFocuses.length + 1}`);
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–æ–∫—É—Å–æ–≤ –≤—Ç–æ—Ä–æ–≥–æ —Å—Ä–æ–∫–∞:', error);
    process.exit(1);
  }
}

createSecondTermFocuses(); 